sudo: false
language: python
env:
  global:
    - NEWEST_PYTHON=2.7
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - gcc-4.8
      - g++-4.8
      - wget
      - openjdk-7-jdk
      - openjdk-7-source
      - pkg-config
      - zip
      - zlib1g-dev
      - swig
python:
  - 2.6
  - 2.7
  - pypy
before_install:
  - wget 'https://github.com/bazelbuild/bazel/releases/download/0.2.2b/bazel-0.2.2b-installer-linux-x86_64.sh'
  - chmod +x bazel-0.2.2b-installer-linux-x86_64.sh
  - ./bazel-0.2.2b-installer-linux-x86_64.sh --user
  - pip install -U protobuf==3.0.0b2
  - pip install asciitree
  - pip install numpy
  - git clone --recursive https://github.com/tensorflow/models.git tf-models
  - cd tf-models/syntaxnet/tensorflow
  - wget 'https://gist.githubusercontent.com/jackcook/94297090549a59a117fb79afedbfb47b/raw/05f6cd4f80ae6755fd4e2438d5552440efc1937a/configure' -O 'alt-configure'
  - chmod +x alt-configure
  - ./alt-configure
  - bazel test syntaxnet/... util/utf8/...
install:
  - pip install pytest
script:
  - py.test
